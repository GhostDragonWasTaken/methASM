; Generated by MethASM
; x86-64 Assembly Output

.section .text
; Code section

; First pass: processing 3 declarations
; Declaration 0 type: 2 (AST_INLINE_ASM = 10)
; Declaration 1 type: 2 (AST_INLINE_ASM = 10)
; Declaration 2 type: 2 (AST_INLINE_ASM = 10)
.global add

add:
    push %rbp        ; Save old base pointer
    mov %rsp, %rbp  ; Set new base pointer
    ; Save callee-saved registers
    push %rbx         ; Save callee-saved register
    push %r12         ; Save callee-saved register
    push %r13         ; Save callee-saved register
    push %r14         ; Save callee-saved register
    push %r15         ; Save callee-saved register
    ; Registering 2 function parameters
    ; Parameter 'a' in register rcx
    ; Parameter 'b' in register rdx
    ; Return statement
    ; Binary operation: +
    ; Load variable: a
    mov %rcx, %rax      ; From register
    push %rax           ; Save left operand
    ; Load variable: b
    mov %rdx, %rax      ; From register
    mov %rax, %rbx     ; Move right operand to RBX
    pop %rax            ; Restore left operand
    pop %rax            ; Restore left operand
    add %rbx, %rax      ; + operation
    ; Return value in %rax
    jmp .Ladd_exit
.Ladd_exit:
    ; Function epilogue
    mov %rbp, %rsp  ; Restore stack pointer
    ; Restore callee-saved registers
    pop %r15          ; Restore callee-saved register
    pop %r14          ; Restore callee-saved register
    pop %r13          ; Restore callee-saved register
    pop %r12          ; Restore callee-saved register
    pop %rbx          ; Restore callee-saved register
    pop %rbp         ; Restore old base pointer
    ret               ; Return to caller
.global test_floats

test_floats:
    push %rbp        ; Save old base pointer
    mov %rsp, %rbp  ; Set new base pointer
    ; Save callee-saved registers
    push %rbx         ; Save callee-saved register
    push %r12         ; Save callee-saved register
    push %r13         ; Save callee-saved register
    push %r14         ; Save callee-saved register
    push %r15         ; Save callee-saved register
    ; Registering 2 function parameters
    ; Parameter 'x' in register rcx
    ; Parameter 'y' in register rdx
    ; Return statement
    ; Binary operation: *
    ; Load variable: x
    mov %rcx, %rax      ; From register
    push %rax           ; Save left operand
    ; Load variable: y
    mov %rdx, %rax      ; From register
    mov %rax, %rbx     ; Move right operand to RBX
    pop %rax            ; Restore left operand
    pop %rax            ; Restore left operand
    imul %rbx, %rax      ; * operation
    ; Return value in %rax
    jmp .Ltest_floats_exit
.Ltest_floats_exit:
    ; Function epilogue
    mov %rbp, %rsp  ; Restore stack pointer
    ; Restore callee-saved registers
    pop %r15          ; Restore callee-saved register
    pop %r14          ; Restore callee-saved register
    pop %r13          ; Restore callee-saved register
    pop %r12          ; Restore callee-saved register
    pop %rbx          ; Restore callee-saved register
    pop %rbp         ; Restore old base pointer
    ret               ; Return to caller

.global main
main:
    push %rbp
    mov %rsp, %rbp

main:
    push %rbp        ; Save old base pointer
    mov %rsp, %rbp  ; Set new base pointer
    ; Save callee-saved registers
    push %rbx         ; Save callee-saved register
    push %r12         ; Save callee-saved register
    push %r13         ; Save callee-saved register
    push %r14         ; Save callee-saved register
    push %r15         ; Save callee-saved register
    ; Registering 0 function parameters
    ; Return statement
    ; Load variable: result
    ; Warning: Variable result not found in symbol table
    mov $0, %rax        ; Default to 0
    ; Return value in %rax
    jmp .Lmain_exit
.Lmain_exit:
    mov $0, %rax
    leave
    ret

; Default program entry point
.global _start
_start:
    ; Exit gracefully
    mov $60, %rax    ; sys_exit
    mov $0, %rdi     ; exit status
    syscall
