import "std/io";

function then_err() { puts(cstr("THEN_ERR\n")); }
function then_ok() { puts(cstr("THEN_OK\n")); }
function else_err() { puts(cstr("ELSE_ERR\n")); }
function else_ok() { puts(cstr("ELSE_OK\n")); }
function outer_err() { puts(cstr("OUTER_ERR\n")); }
function outer_ok() { puts(cstr("OUTER_OK\n")); }

function main() -> int32 {
  errdefer outer_err();
  defer outer_ok();

  if (0) {
    errdefer then_err();
    defer then_ok();
    return 2;
  } else {
    errdefer else_err();
    defer else_ok();
    return 3;
  }
}
