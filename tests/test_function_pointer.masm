// Test: function pointers
// Test basic function pointer usage

function add(a: int32, b: int32) -> int32 {
  return a + b;
}

function multiply(a: int32, b: int32) -> int32 {
  return a * b;
}

function main() -> int32 {
  // Declare a function pointer variable
  var fp: fn(int32, int32) -> int32;
  
  // Take address of function
  fp = &add;
  
  // Call through function pointer
  var result: int32 = fp(3, 4);
  
  // Should be 3 + 4 = 7
  if (result == 7) {
    // Try calling through a different function
    fp = &multiply;
    result = fp(3, 4);
    
    // Should be 3 * 4 = 12
    if (result == 12) {
      return 1;
    }
  }
  
  return 0;
}
